# My Docker Docs ðŸ˜Š


## Resources
- [Video To Setup Docker](https://www.youtube.com/watch?v=8Ev1aXl7TGY&list=PL4cUxeGkcC9hxjeEtdHFNYMtCpjNBm3h7&index=3)

  - [WSL For Windows](https://docs.microsoft.com/en-us/windows/wsl/install-manual)

  - [Download Docker Desktop](https://www.docker.com/products/docker-desktop/)


## Sample Project
This repository contains a sample project that uses Docker Compose to create a node api and react app.

## An Image
An image in docker, is a set of instructions to run your code container. It contains source code, dependencies, and configuration.


## A Container
A container is a running instance of an image. It is a lightweight, portable, and isolated unit of execution.


## Volumes
Volumes are the preferred mechanism for persisting data generated by and used by Docker containers


## Docker Compose
Docker Compose is a tool for managing multiple Docker containers. It is a configuration file that specifies how to create and run containers.
```docker-compose.yaml```

## Layers of a Docker Image
1. Parent Image - A lightweight OS and runtime
2. Source Code
3. Dependencies
4. Run Commands


## Node Docker Setup - (Can be modified to run other apps)
- Search [Docker Hub](https://hub.docker.com/search/?q=node) for the node image
- Run the command to get latest the image. You can run it anywhere on your system.
  - ```docker pull node```
- Create a file called <b>"Dockerfile"</b> in the root of your node app. This will contain the instructions to build your image.
- Build the image
  - ```docker build -t image_1 .```
  - -t is to give the image a name, in this case api
  - The "." is the current directory.
- Run the Image from Docker Desktop and specify the port expose to your system
- To Run the image from the Command Line
  - ```docker images```
    - list all the images
  - ```docker run --name container_1 -p 4000:4000 -d image_1```
    - --name is to name the container, in this case container_1
    - -p is mapping the ports, the first is the port on the host (our machine), the second is the port on the container
    - -d to run the container in detached mode (it won't block your terminal)
    - image_1 is the image name


## Build a Docker Image
- ```docker build -t image_1 .```
  - -t is to give the image a name, in this case api
  - The "." is the current directory where the <b>"Dockerfile"</b> is.


## Run a Docker Image
- ```docker run --name container_1 -p 4000:4000 -d image_1```
  - --name is to name the container, in this case container_1
  - -p is mapping the ports, the first is the port on the host (our machine), the second is the port on the container
  - -d to run the container in detached mode (it won't block your terminal)
  - image_1 is the image name


## Container Commands
- ```docker ps```
  - list all running the containers
-  ```docker ps -a```
   -  list all containers
- ```docker start container_1```
  - start the container named container_1
- ```docker start -i container_1```
  - start the container named container_1 and attach to the terminal
- ```docker stop container_1```
  - stop the container named container_1
- ```docker rm container_1```
  - remove the container named container_1


## Image commands
- ```docker images```
  - list all the images
- ```docker rmi image_1```
  - remove the image named image_1
- ```docker rmi -f image_1```
  - remove the image named image_1 and force the removal if it is running

## Volume Commands
- ```docker run --name container_1 -v C:\Users\projects\api:/app -p 4000:4000 -d image_1```
  - -v is to map a volume, the first is the path on the host (our machine), the second is the path on the container
  - The command will map our project folder to the container folder /app
- ```docker run --name container_1 -v C:\Users\projects\api:/app -v /app/node_modules -p 4000:4000 -d image_1```
  - The command will map our project folder to the container folder /app, and map the node_modules folder to the container folder /app/node_modules. This is useful so that our node_modules folder locally is not needed to be in the container.

## Docker Compose Commands
- ```docker-compose up```
  - start docker compose in the current directory
- ```docker-compose down```
  - stop and remove all containers created by docker compose
- ```docker-compose down --rmi all -v```
  - stop and remove all containers created by docker compose and remove all images and volumes created by docker compose

## Other Commands
- ```docker system prune -a```
  - remove all stopped containers and images
- ```docker login```
  - login to docker hub
  
## Notes
- To specify an image name, you can use the following format:
  - <b>image_name:tag</b>
  - The tag is optional. If you don't specify a tag, it will latest, the tag represents the version
- When building an image to upload to docker hub, you can use the following format:
  - <b>docker_hub_username/image_name:tag</b>